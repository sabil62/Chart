<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Chart</title>

    <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase.js"></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"
      integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw=="
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="./style/style.css" />

    <!-- fontawesome -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
      integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
      crossorigin="anonymous"
    />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />

    <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-database.js"></script>
  </head>
  <body
    data-spy="scroll"
    data-target="#navbar-chart"
    style="background-color: aliceblue"
  >
    <nav
      id="navbar-chart"
      class="navbar navbar-expand-lg navbar-light bg-light fixed-top"
      style="display: block"
    >
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarTogglerDemo01"
        aria-controls="navbarTogglerDemo01"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
        <a class="navbar-brand cleaners mr-3" href="#" style="font-size: 1.8rem"
          >City Bin</a
        >
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0" style="font-size: 1.1rem">
          <!-- navbar-nav(do not write nav only) -->
          <li class="nav-item">
            <a class="nav-link" href="#three"
              >Home <span class="sr-only">(current)</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#one">Locations</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#two">About</a>
          </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
          <input
            class="form-control mr-sm-2"
            type="search"
            aria-label="Search"
          />
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
            Search
          </button>
        </form>
      </div>
    </nav>
    <!-- ---------------------------------------Start---------------------------------------------- -->
    <h1 class="ml-4 bin">Bin number: 1</h1>
    <!-- -----------------------------------------ANOTHER BOX-------------------------------------------- -->
    <div class="col-md-12 px-4">
      <div class="row">
        <div class="col-xl-4 col-md-6 col-sm-12 px-4">
          <div class="box" style="height: 250px">
            <div class="col-md-12">
              <div class="row py-2">
                <div class="col-6 box-heading">Moisture Status</div>
                <div class="col-3"></div>
                <div class="col-3 pt-2 icon-right">
                  <i class="fas fa-caret-down p-1"></i>
                  <i class="fab fa-dashcube p-1"></i>
                  <i class="fas fa-times p-1"></i>
                </div>
              </div>
            </div>
            <div class="line"></div>
          </div>
        </div>
        <div class="col-xl-4 col-md-6 col-sm-12 px-4">
          <div class="box" style="height: 250px">
            <div class="col-md-12">
              <div class="row py-2">
                <div class="col-6 box-heading">Temperature</div>
                <div class="col-3"></div>
                <div class="col-3 pt-2 icon-right">
                  <i class="fas fa-caret-down p-1"></i>
                  <i class="fab fa-dashcube p-1"></i>
                  <i class="fas fa-times p-1"></i>
                </div>
              </div>
            </div>
            <div class="line"></div>
          </div>
        </div>
        <div class="col-xl-4 col-md-12 col-sm-12 px-4">
          <div class="box" style="height: 250px">
            <div class="col-md-12">
              <div class="row py-2">
                <div class="col-6 box-heading">Time Stamp</div>
                <div class="col-3"></div>
                <div class="col-3 pt-2 icon-right">
                  <i class="fas fa-caret-down p-1"></i>
                  <i class="fab fa-dashcube p-1"></i>
                  <i class="fas fa-times p-1"></i>
                </div>
              </div>
            </div>
            <div class="line"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- -----------------------------------------Main box-------------------------------------------- -->
    <div class="col-md-12 px-4">
      <div class="row">
        <div class="col-xl-4 col-md-6 col-sm-12 p-4">
          <div class="box">
            <div class="col-md-12">
              <div class="row py-2">
                <div class="col-6 box-heading">Dustbin Status</div>
                <div class="col-3"></div>
                <div class="col-3 pt-2 icon-right">
                  <i class="fas fa-caret-down p-1"></i>
                  <i class="fab fa-dashcube p-1"></i>
                  <i class="fas fa-times p-1"></i>
                </div>
              </div>
            </div>
            <div class="line"></div>
            <div class="dustbin">
              <img src="./assets/images/dustbin.png" class="dustbin-closed" />
              <!-- same img dustbin-opened and jquery .hide -->
            </div>
            <h3 class="text-center pt-3">CLOSED</h3>
          </div>
        </div>
        <div class="col-xl-4 col-md-6 col-sm-12 p-4">
          <div class="box">
            <div class="col-md-12">
              <div class="row py-2">
                <div class="col-6 box-heading">Dustbin Level</div>
                <div class="col-3"></div>
                <div class="col-3 pt-2 icon-right">
                  <i class="fas fa-caret-down p-1"></i>
                  <i class="fab fa-dashcube p-1"></i>
                  <i class="fas fa-times p-1"></i>
                </div>
              </div>
            </div>
            <div class="line"></div>
            <!-- this canvas is where graph wil form -->
            <canvas
              id="bin-level"
              style="margin-top: 15%; padding: 0 8rem"
            ></canvas>
          </div>
        </div>
        <div class="col-xl-4 col-md-12 col-sm-12 p-4">
          <div class="box">
            <div class="col-md-12">
              <div class="row py-2">
                <div class="col-6 box-heading">Humidity</div>
                <div class="col-3"></div>
                <div class="col-3 pt-2 icon-right">
                  <i class="fas fa-caret-down p-1"></i>
                  <i class="fab fa-dashcube p-1"></i>
                  <i class="fas fa-times p-1"></i>
                </div>
              </div>
            </div>
            <div class="line"></div>
            <!-- this canvas is where graph wil form -->
            <canvas id="humidity" style="margin-top: 15%"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- -----------------------------------------END-------------------------------------------- -->

    <div class="box">
      <div class="col-md-12">
        <div class="row py-2">
          <div class="col-6 box-heading">Dustbin Status</div>
          <div class="col-3"></div>
          <div class="col-3 pt-2 icon-right">
            <i class="fas fa-caret-down p-1"></i>
            <i class="fab fa-dashcube p-1"></i>
            <i class="fas fa-times p-1"></i>
          </div>
        </div>
      </div>
      <div class="line"></div>
    </div>

    <!-- -----------------------------------------END-------------------------------------------- -->

    <canvas id="myChart" width="200" height="200"></canvas>
    <!-- <script>
      var ctx = document.getElementById("myChart").getContext("2d");
      var myChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["Value"],
          datasets: [
            {
              label: "# of Whatever",
              data: [0],
              backgroundColor: ["rgba(255, 99, 132, 0.2)"],
              borderColor: ["rgba(255, 99, 132, 1)"],
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            yAxes: [
              {
                ticks: {
                  beginAtZero: true,
                },
              },
            ],
          },
        },
      });

      function addData(chart, label, data) {
        chart.data.labels.push(label);
        chart.data.datasets.forEach((dataset) => {
          dataset.data.push(data);
        });
        chart.update();
      }

      function removeData(chart) {
        chart.data.labels.pop();
        chart.data.datasets.forEach((dataset) => {
          dataset.data.pop();
        });
        chart.update();
      }

      //Firebase code
      //Config values to ba adapted!
      var config = {
        apiKey: "xxxxx",
        authDomain: "xxxxx",
        databaseURL: "xxxxx",
        projectId: "xxxxx",
        storageBucket: "xxxxx",
        messagingSenderId: "xxxxx",
      };

      firebase.initializeApp(config);

      var valueRef = firebase.database().ref("arduinoValue");
      valueRef.on("value", function (snapshot) {
        removeData(myChart);
        addData(myChart, "1", snapshot.val());
      });
    </script> -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>
    <script src="./js/charts.js"></script>
  </body>
</html>
